<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=430" />
  <title>ê°ì •ëŒ€í™” CBT v1.0</title>
  <style>
    /* KoPubWorld Dotum í°íŠ¸ CDN (í•„ìš”í•œ ê²½ìš°) */
    /* @import url('https://webfontworld.github.io/kopus/KoPubWorldDotum.css'); */

    body {
      font-family: 'KoPubWorld Dotum', sans-serif; /* í°íŠ¸ ì ìš© */
      margin: 0;
      padding: 40px 20px; /* index.html ìŠ¤íƒ€ì¼ ìœ ì§€ */
      background-color: #ffffff;
      color: #333;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: calc(100vh - 80px); /* ì „ì²´ í™”ë©´ ë†’ì´ì—ì„œ íŒ¨ë”© ì œì™¸ */
      box-sizing: border-box;
    }

    .app-info-link {
      /* intro.htmlì˜ info-link ì™€ index.htmlì˜ app-info-link ìŠ¤íƒ€ì¼ì„ ì¡°í•© */
      /* index.html ì²˜ëŸ¼ ìƒë‹¨ ì¢Œì¸¡ì— ë°°ì¹˜í•˜ê±°ë‚˜, intro.html ì²˜ëŸ¼ í•˜ë‹¨ì— ë°°ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” í•˜ë‹¨ ë°°ì¹˜ë¡œ ìˆ˜ì •í•©ë‹ˆë‹¤. */
      margin-top: 30px; /* ì‹œì‘í•˜ê¸° ë²„íŠ¼ê³¼ì˜ ê°„ê²© */
      font-size: 14px;
      color: #0095FF;
      text-decoration: underline;
      cursor: pointer;
      order: 3; /* flex ì•„ì´í…œ ìˆœì„œ: ì œëª©, ë¶€ì œëª©, ë²„íŠ¼ ë‹¤ìŒìœ¼ë¡œ ë°°ì¹˜ */
    }

    .intro-header {
      font-size: 24px; /* intro.html h1 í¬ê¸° ë°˜ì˜ */
      font-weight: bold;
      margin-top: 40px; /* intro.html h1 margin-top ìœ ì‚¬í•˜ê²Œ ì¡°ì • */
      margin-bottom: 12px;
      order: 0;
    }

    .intro-sub {
      font-size: 16px;
      color: #666; /* index.html ìŠ¤íƒ€ì¼ ìœ ì§€ */
      margin-bottom: 30px;
      line-height: 1.6;
      order: 1;
    }

    .start-btn {
      width: 320px;
      height: 60px;
      font-size: 18px;
      font-weight: bold;
      /* intro.htmlì˜ ë²„íŠ¼ ìƒ‰ìƒ(#FAF07F)ê³¼ index.htmlì˜ ë²„íŠ¼ ìƒ‰ìƒ(#0095FF) ì¤‘ ì„ íƒ ë˜ëŠ” ìƒˆë¡œìš´ ìƒ‰ìƒ ì§€ì • */
      /* ì—¬ê¸°ì„œëŠ” index.htmlì˜ íŒŒë€ìƒ‰ ê³„ì—´ì„ ìœ ì§€í•˜ë˜, intro.htmlì˜ ë…¸ë€ìƒ‰ ê³„ì—´ë¡œ ë³€ê²½í•˜ë ¤ë©´ background-color ìˆ˜ì • */
      background-color: #0095FF; /* index.html ìŠ¤íƒ€ì¼ ìœ ì§€ */
      /* background-color: #FAF07F; */ /* intro.html ìŠ¤íƒ€ì¼ë¡œ ë³€ê²½ ì‹œ */
      color: white; /* íŒŒë€ìƒ‰ ë°°ê²½ì— í°ìƒ‰ í…ìŠ¤íŠ¸ */
      /* color: #333; */ /* ë…¸ë€ìƒ‰ ë°°ê²½ì— ì–´ë‘ìš´ í…ìŠ¤íŠ¸ë¡œ ë³€ê²½ ì‹œ */
      border: none;
      border-radius: 10px;
      cursor: pointer;
      margin-top: 20px; /* ìš”ì†Œê°„ ê°„ê²© ì¶”ê°€ */
      order: 2;
    }

    .permission-guide {
      margin-top: 40px;
      font-size: 14px;
      color: #555;
      line-height: 1.5;
      background-color: #f9f9f9; /* ê°€ë…ì„±ì„ ìœ„í•œ ë°°ê²½ìƒ‰ ì¶”ê°€ */
      padding: 15px;
      border-radius: 8px;
      max-width: 380px; /* ìµœëŒ€ ë„ˆë¹„ ì„¤ì • */
      width: 100%;
      box-sizing: border-box;
      order: 4; /* ë§í¬ ë‹¤ìŒì— ë°°ì¹˜ */
    }

    .permission-guide strong {
      display: block;
      margin-bottom: 10px;
      font-size: 15px;
    }

    /* íŒì—… ìŠ¤íƒ€ì¼ (index.html ê¸°ë°˜) */
    .mic-popup {
      position: fixed;
      top: 0; /* ì „ì²´ í™”ë©´ì„ ë®ë„ë¡ ìˆ˜ì • */
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.75); /* ë°˜íˆ¬ëª…ë„ ì‚´ì§ ì¡°ì • */
      z-index: 1000;
      display: none; /* ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ */
      justify-content: center;
      align-items: center;
      padding: 20px; /* ëª¨ë°”ì¼ í™”ë©´ ê³ ë ¤í•œ íŒ¨ë”© */
      box-sizing: border-box;
    }

    .mic-popup-content {
      background-color: #ffffff; /* í°ìƒ‰ ë°°ê²½ */
      color: #333; /* ì–´ë‘ìš´ í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
      font-size: 16px;
      line-height: 1.6;
      padding: 30px 25px; /* íŒ¨ë”© ì¡°ì • */
      border-radius: 12px;
      text-align: center;
      max-width: 320px; /* íŒì—… ìµœëŒ€ ë„ˆë¹„ */
      width: 100%;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2); /* ê·¸ë¦¼ì íš¨ê³¼ */
      position: relative; /* ë‹«ê¸° ë²„íŠ¼ ìœ„ì¹˜ ê¸°ì¤€ */
    }
    .mic-popup-content .icon {
        font-size: 30px;
        margin-bottom: 15px;
    }

    .popup-close-btn {
      /* íŒì—… ë‚´ë¶€ì— ëª…í™•í•œ ë‹«ê¸° ë²„íŠ¼ìœ¼ë¡œ ë³€ê²½ */
      background-color: #e74c3c; /* ë‹«ê¸° ë²„íŠ¼ ìƒ‰ìƒ */
      color: white;
      border: none;
      border-radius: 8px;
      padding: 10px 25px;
      cursor: pointer;
      font-weight: bold;
      font-size: 15px;
      margin-top: 20px; /* ë‚´ìš©ê³¼ì˜ ê°„ê²© */
      display: inline-block; /* ë²„íŠ¼ í¬ê¸° ìë™ ì¡°ì ˆ */
    }
    /* ì•± ì†Œê°œ ë§í¬ë¥¼ ìƒë‹¨ì— ë°°ì¹˜í•˜ëŠ” ê²½ìš° (ëŒ€ì•ˆ)
    .app-info-link-top {
      position: absolute;
      top: 20px;
      left: 20px;
      font-size: 14px;
      color: #0095FF;
      cursor: pointer;
      text-decoration: underline;
      z-index: 10;
    }
    */
  </style>
</head>
<body>
  <h1 class="intro-header">ê°ì •ëŒ€í™” CBT v1.0</h1>
  <p class="intro-sub">â€œì•„ìŠ¤í¼ê±°, ADHDì™€ ê°™ì€ í‘œí˜„ì´ ì·¨ì•½í•œ ì•„ì´ë“¤ì„ ìœ„í•œ<br> ëŒ€í™” ì—°ìŠµ ë° ê°ì • ë¶„ì„â€</p>

  <button class="start-btn" onclick="handleStart()">ì‹œì‘í•˜ê¸°</button>

  <div class="permission-guide">
    <strong>ë§ˆì´í¬ ê¶Œí•œ ì•ˆë‚´</strong>
    ì´ ì•±ì„ ì‚¬ìš©í•˜ë ¤ë©´ ë§ˆì´í¬ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.<br><br>
    ğŸ”¹ Android: ì£¼ì†Œì°½ ì˜† ğŸ”’ ì•„ì´ì½˜ â†’ [ê¶Œí•œ] â†’ ë§ˆì´í¬ â†’ í—ˆìš©<br>
    ğŸ”¹ iPhone: ì„¤ì • ì•± â†’ Safari â†’ ì›¹ì‚¬ì´íŠ¸ ì„¤ì • â†’ ë§ˆì´í¬ â†’ í—ˆìš©
  </div>

  <div class="app-info-link" onclick="openAppInfo()">
    ì•± ì†Œê°œ ë³´ê¸°
  </div>

  <div id="mic-popup" class="mic-popup">
    <div class="mic-popup-content">
      <div class="icon">ğŸ™ï¸</div>
      <strong>ë§ˆì´í¬ ê¶Œí•œ í•„ìš”</strong><br>
      'ê°ì • ëŒ€í™” CBT v1.0'ì„ ì‚¬ìš©í•˜ë ¤ë©´<br>
      ë§ˆì´í¬ ê¶Œí•œì„ í—ˆìš©í•´ì•¼ í•©ë‹ˆë‹¤.<br>
      ë¸Œë¼ìš°ì € ë˜ëŠ” ì‹œìŠ¤í…œ ì„¤ì •ì—ì„œ<br>
      ë§ˆì´í¬ ì ‘ê·¼ì„ í—ˆìš©í•´ì£¼ì„¸ìš”.
      <button class="popup-close-btn" onclick="closeMicPopup()">ë‹«ê¸°</button>
    </div>
  </div>

  <script>
    // ì•± ì†Œê°œ í˜ì´ì§€ ì—´ê¸° í•¨ìˆ˜
    function openAppInfo() {
      window.open('https://www.notion.so/maenglionworld/CBT-v1-0-1ebbcdc037cd80fa9c0ddef234121e84?pvs=4', '_blank');
    }

    // ì‹œì‘ ë²„íŠ¼ í•¸ë“¤ëŸ¬ (index.html ê¸°ë°˜)
    async function handleStart() {
      try {
        // ë§ˆì´í¬ ê¶Œí•œ ìš”ì²­
        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
        // ê¶Œí•œì„ ì–»ì€ í›„ì—ëŠ” ìŠ¤íŠ¸ë¦¼ì„ ì¦‰ì‹œ ì¤‘ì§€í•˜ì—¬ ë§ˆì´í¬ ì‚¬ìš© í‘œì‹œë¥¼ ìµœì†Œí™”í•©ë‹ˆë‹¤.
        // talk.htmlì—ì„œ ì‹¤ì œë¡œ í•„ìš”í•  ë•Œ ë‹¤ì‹œ ìš”ì²­í•˜ê²Œ ë©ë‹ˆë‹¤.
        stream.getTracks().forEach(track => track.stop());
        // ê¶Œí•œì´ ì„±ê³µì ìœ¼ë¡œ í™•ì¸ë˜ë©´ talk.htmlë¡œ ì´ë™
        window.location.href = 'talk.html';
      } catch (err) {
        console.error("ğŸ¤ ë§ˆì´í¬ ê¶Œí•œ ì˜¤ë¥˜:", err);
        // ê¶Œí•œ ì˜¤ë¥˜ ì‹œ íŒì—… í‘œì‹œ
        document.getElementById('mic-popup').style.display = 'flex';
      }
    }

    // ë§ˆì´í¬ íŒì—… ë‹«ê¸° í•¨ìˆ˜
    function closeMicPopup() {
      document.getElementById('mic-popup').style.display = 'none';
    }

    // íŒì—… ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸° (ì„ íƒ ì‚¬í•­)
    const micPopup = document.getElementById('mic-popup');
    micPopup.addEventListener('click', function(event) {
      if (event.target === micPopup) { // íŒì—… ë°°ê²½ í´ë¦­ ì‹œ
        closeMicPopup();
      }
    });
  </script>
</body>
</html>
